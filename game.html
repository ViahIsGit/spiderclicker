<!DOCTYPE html>
<html>
<head>
  <title>Spider Clicker - Game</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Happy+Monkey&display=swap" rel="stylesheet">
<link rel="icon" href="imgs/Clicker.png" type="image/x-icon">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body {
      font-family: "Happy Monkey", cursive;
      margin: 0;
      padding: 0;
      cursor: none;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      user-select: none;
      overflow: hidden;
  background: #000; /* Cor de fundo principal */
  background-image: 
    linear-gradient(45deg, #222 25%, transparent 25%, transparent 75%, #222 75%, #222),
    linear-gradient(45deg, #222 25%, transparent 25%, transparent 75%, #222 75%, #222);
  background-size: 40px 40px; /* Tamanho de cada quadrado */
  background-position: 0 0, 20px 20px; /* Ajuste de posição para o padrão */
      color: #fff;
    }
    .container {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      user-select: none;
      cursor: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .top-left-buttons {
      position: absolute;
      top: 16px;
      left: 16px;
      display: flex;
      flex-direction: row;
      gap: 8px;
    }
    .bottom-left-buttons {
      position: absolute;
      cursor: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .button {
      width: 48px;
      height: 48px;
      font-size: 20px;
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      cursor: none;
    }
    .button2 {
      width: 48px;
      height: 48px;
      font-size: 20px;
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      cursor: none;
}

    .button span {
      position: absolute;
      bottom: 4px;
      right: 4px;
      font-size: 10px;
      background-color: #333;
      border: 1px solid #555;
      border-radius: 50%;
      padding: 2px 4px;
    }
    .right-panel {
      position: absolute;
      top: 16px;
      user-select: none;
      right: 16px;
      width: 256px;
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 8px;
      overflow-y: auto;
      max-height: 95vh; /* Definindo altura máxima para não ultrapassar a tela */
    }
    /* Barra de rolagem personalizada */
    .right-panel::-webkit-scrollbar {
      width: 8px; /* Largura da barra de rolagem */
    }
    .right-panel::-webkit-scrollbar-thumb {
      background-color: #888; /* Cor da "bolinha" da barra de rolagem */
      border-radius: 4px;
      transition: background-color 0.3s ease; /* Efeito suave na cor */
    }
    .right-panel::-webkit-scrollbar-thumb:hover {
      background-color: #555; /* Cor da bolinha ao passar o mouse */
    }
    .right-panel::-webkit-scrollbar-track {
      background-color: #333; /* Cor de fundo da barra de rolagem */
      border-radius: 4px;
    }
    .right-panel .item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      border: 2px solid #555;
      border-radius: 8px;
      margin-bottom: 8px;
      background-color: #333;
    }
    .center-info {
      position: absolute;
      font-family: 'Comic Neue', cursive;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }
    .center-info .info {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .center-info .info .text {
      font-size: 24px;
      font-weight: bold;
    }
    .center-info .details {
      font-size: 18px;
    }
    .main-spider {
      position: relative;
    }
    .main-spider img {
      width: 128px;
      height: 128px;
    }
    .main-spider .multiplier {
      position: absolute;
      bottom: 0;
      right: 0;
      font-size: 24px;
      font-weight: bold;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      overflow-y: auto;
    }
    
    .modal-content {
      background: #222;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      width: 300px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }
    
    .modal-content::-webkit-scrollbar {
      width: 8px;
    }
    
    .modal-content::-webkit-scrollbar-thumb {
      background-color: #555;
      border-radius: 4px;
    }
    
    .modal-content::-webkit-scrollbar-track {
      background-color: #333;
      border-radius: 4px;
    }
    
    .skins-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 10px;
      margin: 20px 0;
    }
    
    .skin-item {
      background-color: #333;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .skin-item:hover {
      transform: scale(1.05);
      border-color: #4CAF50;
    }
    
    .skin-item img {
      width: 64px;
      height: 64px;
      margin-bottom: 8px;
    }
    
    .skin-item.special {
      border-color: #FFD700;
      box-shadow: 0 0 10px #FFD700;
    }
    
    .skin-item.locked {
      filter: grayscale(100%);
      opacity: 0.7;
    }
    
    .falling-spider {
      position: fixed;
      width: 40px;
      height: 40px;
      background: url('imgs/Clicker.png') no-repeat center;
      background-size: contain;
      pointer-events: none;
      z-index: 100;
      animation: fallingAnimation 2s linear forwards;
    }
    
    @keyframes fallingAnimation {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    .modal-button {
      background: #555;
      border: none;
      color: white;
      padding: 10px 20px;
      margin: 10px;
      border-radius: 8px;
      cursor: none;
    }
    .modal-button:hover {
      background: #777;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #333;
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      z-index: 1001;
    }
    .modal-close:hover {
      background: #555;
    }
  
    /* Media Queries para dispositivos móveis */
   /* Media Queries para dispositivos móveis */
@media (max-width: 768px) {
  .right-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    top: auto;
    width: 100%;
    max-height: 30vh;
    border-radius: 16px 16px 0 0;
    z-index: 100;
  }

  .center-info {
    top: 80px;
  }

  .main-spider {
    margin-bottom: 35vh;
  }

  .top-left-buttons {
    display: flex;
    justify-content: center;
    position: fixed;
    top: 16px;
    left: 0;
    right: 0;
    gap: 12px;
    z-index: 101;
  }

  .button2 {
    width: 56px;
    height: 56px;
    font-size: 24px;
    background-color: rgba(34, 34, 34, 0.9);
    backdrop-filter: blur(5px);
  }

  .item {
    padding: 12px;
    margin-bottom: 12px;
    font-size: 16px;
  }

  .modal-content {
    width: 90%;
    max-width: none;
    margin: 20px;
    padding: 16px;
  }

  .achievements-panel,
  .stats-panel,
  .prestige-panel,
  .challenges-panel,
  .minigame-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-height: 80vh;
    margin: 0;
  }

  .notification-container {
    bottom: 32vh;
    top: auto;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
  }

  .notification {
    width: 100%;
    padding: 16px;
    font-size: 16px;
    text-align: center;
  }

  .currency-popup {
    font-size: 32px;
  }

  .falling-spider {
    width: 32px;
    height: 32px;
  }

  .minigame-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin: 20px 0;
  }

  .minigame-cell {
    aspect-ratio: 1;
  }

  .skins-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  .skin-item {
    padding: 12px;
  }

  .skin-item img {
    width: 72px;
    height: 72px;
  }
}

@media (max-width: 480px) {
  .right-panel {
    max-height: 35vh;
  }

  .main-spider {
    margin-bottom: 40vh;
  }

  .button2 {
    width: 48px;
    height: 48px;
    font-size: 20px;
  }

  .item {
    padding: 10px;
    margin-bottom: 10px;
    font-size: 14px;
  }

  .notification {
    font-size: 14px;
    padding: 12px;
  }

  .currency-popup {
    font-size: 28px;
  }

  .center-info .info .text {
    font-size: 24px;
  }

  .center-info .details {
    font-size: 18px;
  }

  .skins-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }

  .skin-item img {
    width: 64px;
    height: 64px;
  }
}

.cursor {
      position: absolute;
      width: 40px;
      height: 40px;
      background: url('imgs/silly.png') no-repeat center;
      background-size: contain;
      pointer-events: none;
      transform: translate(-50%, -50%);
      z-index: 9999;
    }
    .click-effect {
      position: absolute;
      width: 40px;
      height: 40px;
      background: url('imgs/click-effect.png') no-repeat center;
      background-size: contain;
      pointer-events: none;
      animation: clickAnimation 0.5s ease-out forwards;
    }
    
    @keyframes clickAnimation {
      0% {
        transform: scale(0.5);
        opacity: 1;
      }
      100% {
        transform: scale(2);
        opacity: 0;
      }
    }
    
    .currency-popup {
      position: absolute;
      color: #fff;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      animation: popupAnimation 1s ease-out forwards;
      pointer-events: none;
    }
    
    @keyframes popupAnimation {
      0% {
        transform: translateY(0);
        opacity: 1;
      }
      100% {
        transform: translateY(-50px);
        opacity: 0;
      }
    }
    .achievements-panel, .stats-panel, .prestige-panel, .challenges-panel, .minigame-panel {
      position: absolute;
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 16px;
      display: none;
      z-index: 1000;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .achievements-panel::-webkit-scrollbar,
    .stats-panel::-webkit-scrollbar,
    .prestige-panel::-webkit-scrollbar,
    .challenges-panel::-webkit-scrollbar,
    .minigame-panel::-webkit-scrollbar {
      width: 8px;
    }
    
    .achievements-panel::-webkit-scrollbar-thumb,
    .stats-panel::-webkit-scrollbar-thumb,
    .prestige-panel::-webkit-scrollbar-thumb,
    .challenges-panel::-webkit-scrollbar-thumb,
    .minigame-panel::-webkit-scrollbar-thumb {
      background-color: #555;
      border-radius: 4px;
    }
    
    .achievements-panel::-webkit-scrollbar-track,
    .stats-panel::-webkit-scrollbar-track,
    .prestige-panel::-webkit-scrollbar-track,
    .challenges-panel::-webkit-scrollbar-track,
    .minigame-panel::-webkit-scrollbar-track {
      background-color: #333;
      border-radius: 4px;
    }
    .achievement {
      display: flex;
      align-items: center;
      padding: 8px;
      margin-bottom: 8px;
      background-color: #333;
      border: 2px solid #555;
      border-radius: 8px;
    }
    
    .achievement.locked {
      opacity: 0.5;
    }
    
    .achievement-icon {
      width: 32px;
      height: 32px;
      margin-right: 8px;
    }
    .stat-item {
      display: flex;
      justify-content: space-between;
      padding: 8px;
      margin-bottom: 8px;
      background-color: #333;
      border: 2px solid #555;
      border-radius: 8px;
    }
    .event-notification {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
      z-index: 1000;
      animation: eventNotification 3s ease-out forwards;
    }
    
    @keyframes eventNotification {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
      }
      20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      80% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
      }
    }
    .prestige-button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 10px 20px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 8px;
    }
    
    .prestige-button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    .challenge {
      display: flex;
      flex-direction: column;
      padding: 8px;
      margin-bottom: 8px;
      background-color: #333;
      border: 2px solid #555;
      border-radius: 8px;
    }
    
    .challenge-progress {
      width: 100%;
      height: 8px;
      background-color: #555;
      border-radius: 4px;
      margin-top: 8px;
    }
    
    .challenge-progress-bar {
      height: 100%;
      background-color: #4CAF50;
      border-radius: 4px;
      transition: width 0.3s ease;
    }
    
    .challenge-reward {
      color: #FFD700;
      font-weight: bold;
    }
    .notification-container {
      position: fixed;
      top: 16px;
      right: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 1000;
    }
    
    .notification {
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 12px;
      color: #fff;
      animation: slideIn 0.3s ease-out forwards;
      max-width: 300px;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .notification.success {
      border-color: #4CAF50;
    }
    
    .notification.error {
      border-color: #f44336;
    }
    
    .notification.warning {
      border-color: #ff9800;
    }
    
    .notification.info {
      border-color: #2196F3;
    }
    .special-skin {
      position: relative;
      border: 2px solid #FFD700;
      box-shadow: 0 0 10px #FFD700;
    }
    
    .skin-locked {
      position: relative;
      filter: grayscale(100%);
    }
    
    .skin-locked::after {
      content: '🔒';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
    }
    
    .skin-requirements {
      font-size: 12px;
      color: #888;
      margin-top: 4px;
    }
    .combo-display {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 48px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 10px #FFD700;
      animation: comboPulse 0.5s ease-out;
      pointer-events: none;
      z-index: 100;
    }
    
    @keyframes comboPulse {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0.8;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }
    
    .combo-multiplier {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      color: #FFD700;
      text-shadow: 0 0 5px #FFD700;
      animation: multiplierPulse 0.5s ease-out;
      pointer-events: none;
      z-index: 100;
    }
    
    @keyframes multiplierPulse {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 0.8;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }
    .minigame-panel {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 16px;
      display: none;
      z-index: 1000;
      width: 400px;
      text-align: center;
    }
    
    .minigame-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin: 16px 0;
    }
    
    .minigame-cell {
      width: 100%;
      aspect-ratio: 1;
      background-color: #333;
      border: 2px solid #555;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .minigame-cell:hover {
      background-color: #444;
    }
    
    .minigame-cell.spider {
      background-image: url('imgs/Clicker.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }
    
    .minigame-timer {
      font-size: 24px;
      margin: 16px 0;
      color: #FFD700;
    }
    
    .minigame-score {
      font-size: 20px;
      margin: 8px 0;
      color: #4CAF50;
    }
    .seasonal-event {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    
    .seasonal-content {
      background-color: #222;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      max-width: 500px;
    }
    
    .seasonal-rewards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
      margin: 20px 0;
    }
    
    .seasonal-reward {
      background-color: #333;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 10px;
    }
    .menu-buttons {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      justify-content: center;
    }
  </style>
  
</head>
<body>
  <div class="cursor" id="cursor"></div>
  <div class="container">
    <div class="top-left-buttons">
      <button class="button2" onclick="openRankingModal()">
        <i class="material-icons">leaderboard</i>
      </button>
      <button class="button2" onclick="openSkinsModal()">
        <i class="material-icons">palette</i>
      </button>
      <button class="button2" onclick="togglePrestigePanel()">
        <i class="material-icons">workspace_premium</i>
      </button>
      <button class="button2" onclick="startMinigame()">
        <i class="material-icons">sports_esports</i>
      </button>
    </div>
    <div class="right-panel" id="shopItems"></div>
    <div class="center-info">
      <div class="info">
        <div class="text" id="currencyDisplay">Teias: 0</div>
      </div>
      <div class="details" id="bonusDisplay">0 Bonus</div>
      <div class="details" id="autoClickerDisplay">0 AutoClicker</div>
    </div>
    <div class="main-spider" onclick="increaseCurrency()">
      <img alt="Large spider" src="imgs/Clicker.png" />
    </div>
  </div>
<!-- Modal para Skins -->
<div id="skinsModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeSkinsModal()">×</button>
    <h2>Escolha sua Skin</h2>
    <div id="skinsContainer"></div>
  </div>
</div>
<!-- Modal para Ranking -->
<div id="rankingModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeRankingModal()">×</button>
    <h2>Ranking Global</h2>
    <div id="rankingList"></div>
    <button class="modal-button" id="sendScoreButton">Enviar Pontuação</button>
  </div>
</div>
<div class="achievements-panel" id="achievementsPanel">
  <button class="modal-close" onclick="toggleAchievementsPanel()">×</button>
  <h2>Conquistas</h2>
  <div id="achievementsList"></div>
</div>
<div class="stats-panel" id="statsPanel">
  <button class="modal-close" onclick="toggleStatsPanel()">×</button>
  <h2>Estatísticas</h2>
  <div id="statsList"></div>
</div>
<div class="prestige-panel" id="prestigePanel">
  <button class="modal-close" onclick="togglePrestigePanel()">×</button>
  <h2>Prestígio</h2>
  <p>Nível de Prestígio: <span id="prestigeLevel">0</span></p>
  <p>Bônus de Prestígio: <span id="prestigeBonus">1x</span></p>
  <p>Teias necessárias: <span id="nextPrestige">1000000</span></p>
  <button class="prestige-button" id="prestigeButton">Reiniciar com Prestígio</button>
</div>
<div class="challenges-panel" id="challengesPanel">
  <button class="modal-close" onclick="toggleChallengesPanel()">×</button>
  <h2>Desafios Diários</h2>
  <div id="challengesList"></div>
</div>
<div class="minigame-panel" id="minigamePanel">
  <button class="modal-close" onclick="closeMinigame()">×</button>
  <h2>Mini-jogo</h2>
  <div class="minigame-timer" id="minigameTimer">30</div>
  <div class="minigame-score" id="minigameScore">Pontuação: 0</div>
  <div class="minigame-grid" id="minigameGrid"></div>
</div>
<div class="seasonal-event" id="seasonalEvent">
  <div class="seasonal-content">
    <button class="modal-close" onclick="closeSeasonalEvent()">×</button>
    <h2 id="seasonalTitle">Evento Sazonal</h2>
    <p id="seasonalDescription"></p>
    <div class="seasonal-rewards" id="seasonalRewards"></div>
  </div>
</div>
<div class="notification-container" id="notificationContainer"></div>
<audio id="clickSound" src="imgs/click.mp3"></audio>
<audio id="buySound" src="imgs/buy.mp3"></audio>
<audio id="backgroundMusic" src="imgs/background.mp3" loop></audio>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
<script>
  // Configuração do Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyC9QD1Q3OIATfubbyGgZD4i912UcVQWhi8",
    authDomain: "spiderclicker0.firebaseapp.com",
    projectId: "spiderclicker0",
    databaseURL: "https://spiderclicker0-default-rtdb.firebaseio.com/",
    storageBucket: "spiderclicker0.firebasestorage.app",
    messagingSenderId: "588870497380",
    appId: "1:588870497380:web:7a4ada0dcc8ebc0b819b71",
    measurementId: "G-RN8T5693ZP"
  };

 
   // Inicialize o Firebase
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// Função para salvar a pontuação no Firebase
function saveScore(playerName, score) {
  const rankingRef = database.ref('rankings');
  rankingRef.push({
    name: playerName,
    score: score,
    timestamp: firebase.database.ServerValue.TIMESTAMP
  });
}

// Função para recuperar o ranking do Firebase
function getRanking() {
  const rankingRef = database.ref('rankings');
  rankingRef.orderByChild('score').limitToLast(10).once('value', (snapshot) => {
    const rankings = [];
    snapshot.forEach((childSnapshot) => {
      const data = childSnapshot.val();
      rankings.push(data);
    });
    rankings.reverse(); // Ordenar do maior para o menor
    displayRanking(rankings);
  });
}

// Função para exibir o ranking no HTML
function displayRanking(rankings) {
  const rankingList = document.getElementById('rankingList');
  rankingList.innerHTML = '';
  rankings.forEach((entry, index) => {
    const rankEntry = document.createElement('div');
    rankEntry.textContent = `${index + 1}. ${entry.name}: ${entry.score} Teias`;
    rankingList.appendChild(rankEntry);
  });
}

// Função para carregar a pontuação do LocalStorage e enviar para o Firebase
function loadScoreAndSendToFirebase() {
  const savedGame = JSON.parse(localStorage.getItem('spiderClickerGame'));
  if (savedGame && savedGame.currency) {
    const playerName = prompt("Digite seu nome para salvar no ranking:");
    if (playerName) {
      saveScore(playerName, savedGame.currency); // Envia a pontuação para o Firebase
      getRanking(); // Atualiza o ranking
    }
  } else {
    alert("Nenhuma pontuação encontrada no LocalStorage!");
  }
}

// Função para abrir o modal de ranking
function openRankingModal() {
  document.getElementById('rankingModal').style.display = 'flex';
  getRanking(); // Carrega o ranking ao abrir o modal
}

// Função para fechar o modal de ranking
function closeRankingModal() {
  document.getElementById('rankingModal').style.display = 'none';
}

// Exemplo de uso: Botão para enviar a pontuação para o Firebase
document.getElementById('sendScoreButton').addEventListener('click', loadScoreAndSendToFirebase);
</script>


<script>
  let equippedSkin = 'imgs/Clicker.png'; // Skin padrão
  const skins = [
    { name: 'Aranha Original', cost: 0, image: 'imgs/Clicker.png' },
    { name: 'Aranha Dourada', cost: 1000, image: 'imgs/GoldenSpider.png' },
    { name: 'Aranha Sol', cost: 5000, image: 'imgs/SunSpider.png' },
    { name: 'Aranha Cibernética', cost: 10000, image: 'imgs/CyberSpider.png' }
  ];

  function loadEquippedSkin() {
    const savedSkin = localStorage.getItem('equippedSkin');
    if (savedSkin) {
      equippedSkin = savedSkin;
      document.querySelector('.main-spider img').src = equippedSkin;
    }
  }

  function equipSkin(skin) {
    if (currency >= skin.cost) {
      currency -= skin.cost;
      equippedSkin = skin.image;
      localStorage.setItem('equippedSkin', equippedSkin);
      document.querySelector('.main-spider img').src = equippedSkin;
      updateDisplays();
      saveGame();
    } else {
      alert('Teias insuficientes!');
    }
  }

  function generateSkins() {
    const skinsContainer = document.getElementById('skinsContainer');
    skinsContainer.innerHTML = ''; // Limpa o conteúdo anterior
    skins.forEach(skin => {
      const skinElement = document.createElement('div');
      skinElement.className = 'item';
      skinElement.innerHTML = `
        <div class="text-right">
          <div>${skin.name}</div>
          <div>Preço: ${skin.cost}</div>
          <img src="${skin.image}" alt="${skin.name}" style="width: 64px; height: 64px; margin-top: 8px;">
        </div>
      `;
      skinElement.addEventListener('click', () => equipSkin(skin));
      skinsContainer.appendChild(skinElement);
    });
  }

  function openSkinsModal() {
    document.getElementById('skinsModal').style.display = 'flex';
    generateSkins();
  }

  function closeSkinsModal() {
    document.getElementById('skinsModal').style.display = 'none';
  }

  document.querySelector('.top-left-buttons .button').addEventListener('click', openSkinsModal);


  window.onload = () => {
    loadGame();
    generateShopItems();
  };
</script>

  </div>

  <script>
    let currency = 0;
    let bonus = 0;
    let autoClickers = 0;
    let clickMultiplier = 1;
    let stats = {
      totalClicks: 0,
      totalTeias: 0,
      timePlayed: 0,
      upgradesBought: 0,
      highestMultiplier: 1
    };

    const items = [
  { name: 'Aranha Micro', effect: '+1/Click', cost: 10, type: 'click', value: 1 },
  { name: 'Teia Frágil', effect: '+1/Sec', cost: 10, type: 'auto', value: 1 },
  { name: 'Aranhazinha', effect: '+10/Click', cost: 1000, type: 'click', value: 10 },
  { name: 'Fortificação da Teia', effect: '+10/Sec', cost: 2500, type: 'auto', value: 10 },
  { name: 'Expansão da Teia', effect: '+5/Sec', cost: 1200, type: 'auto', value: 5 },
  { name: 'Aranha Pequena', effect: '+5/Click', cost: 600, type: 'click', value: 5 },
  { name: 'Aranha Caçadora', effect: '+50/Click', cost: 7000, type: 'click', value: 50 },
  { name: 'Upgrade do Ninho', effect: '+40/Sec', cost: 30000, type: 'auto', value: 40 },
  { name: 'Aranha Rainha', effect: '+120/Click', cost: 50000, type: 'click', value: 120 },
  { name: 'Aranha Venenosa', effect: '+75/Click', cost: 9000, type: 'click', value: 75 },
  { name: 'Coletora de Seda', effect: '+60/Sec', cost: 15000, type: 'auto', value: 60 },
  { name: 'Mestre da Teia', effect: '+100/Sec', cost: 20000, type: 'auto', value: 100 },
  { name: 'Aranha Mãe', effect: '+200/Click', cost: 80000, type: 'click', value: 200 },
  { name: 'Aranha Tóxica', effect: '+500/Click', cost: 120000, type: 'click', value: 500 },
  { name: 'Teia Reforçada', effect: '+500/Sec', cost: 55000, type: 'auto', value: 500 },
  { name: 'Aranha Mutante', effect: '+300/Click', cost: 90000, type: 'click', value: 300 },
  { name: 'Fortaleza da Teia', effect: '+1000/Sec', cost: 100000, type: 'auto', value: 1000 },
  { name: 'Aranha Spidey', effect: '+2500/Click', cost: 150000, type: 'click', value: 2500 },
  { name: 'Império da Seda', effect: '+5000/Sec', cost: 200000, type: 'auto', value: 5000 },
  { name: 'Aranha da Caverna', effect: '+3000/Click', cost: 250000, type: 'click', value: 3000 },
  { name: 'Mega Teia', effect: '+4000/Sec', cost: 300000, type: 'auto', value: 4000 },
  { name: 'Deus Aranha', effect: '+10000/Click', cost: 400000, type: 'click', value: 10000 },
  { name: 'Aranha Antiga', effect: '+20000/Click', cost: 500000, type: 'click', value: 20000 },
  { name: 'Mestre da Teia', effect: '+8000/Sec', cost: 600000, type: 'auto', value: 8000 },
  { name: 'Teia Sombria', effect: '+10000/Click', cost: 700000, type: 'click', value: 10000 },
  { name: 'Aranha Sobrevivente', effect: '+15000/Click', cost: 800000, type: 'click', value: 15000 },
  { name: 'Soberana da Seda', effect: '+5000/Sec', cost: 900000, type: 'auto', value: 5000 },
  { name: 'Aranha das Sombras', effect: '+25000/Click', cost: 1000000, type: 'click', value: 25000 },
  { name: 'Enxame de Aranhas', effect: '+20000/Sec', cost: 1100000, type: 'auto', value: 20000 },
  { name: 'Aranha Suprema', effect: '+50000/Click', cost: 1200000, type: 'click', value: 50000 },
  { name: 'Império da Seda Supremo', effect: '+100000/Sec', cost: 1300000, type: 'auto', value: 100000 },
  { name: 'Mega Colônia', effect: '+50000/Sec', cost: 1400000, type: 'auto', value: 50000 },
  { name: 'Teia Infinita', effect: '+100000/Click', cost: 1500000, type: 'click', value: 100000 },
  { name: 'Aranha Eterna', effect: '+200000/Click', cost: 1600000, type: 'click', value: 200000 },
  { name: 'Teia Sem Fim', effect: '+50000/Sec', cost: 1700000, type: 'auto', value: 50000 },
  { name: 'Aranha Cósmica', effect: '+1000000/Click', cost: 1800000, type: 'click', value: 1000000 },
  { name: 'Teia Suprema', effect: '+200000/Sec', cost: 1900000, type: 'auto', value: 200000 },
  { name: 'Aranha da Infinitude', effect: '+5000000/Click', cost: 2000000, type: 'click', value: 5000000 }
];


    function loadGame() {
      const savedGame = JSON.parse(localStorage.getItem('spiderClickerGame'));
      if (savedGame) {
        currency = savedGame.currency;
        bonus = savedGame.bonus;
        autoClickers = savedGame.autoClickers;
        clickMultiplier = savedGame.clickMultiplier;
        updateDisplays();
      }
    }

    function saveGame() {
      const gameState = {
        currency,
        bonus,
        autoClickers,
        clickMultiplier
      };
      localStorage.setItem('spiderClickerGame', JSON.stringify(gameState));
    }

    function updateDisplays() {
      document.getElementById('currencyDisplay').textContent = `Teias: ${currency}`;
      document.getElementById('bonusDisplay').textContent = `x${clickMultiplier} Bonus`;
      document.getElementById('autoClickerDisplay').textContent = `${autoClickers} AutoClicker`;
    }

    function createClickEffect(x, y) {
      const effect = document.createElement('div');
      effect.className = 'click-effect';
      effect.style.left = `${x}px`;
      effect.style.top = `${y}px`;
      document.body.appendChild(effect);
      setTimeout(() => effect.remove(), 500);
    }
    
    function createCurrencyPopup(x, y, amount) {
      const popup = document.createElement('div');
      popup.className = 'currency-popup';
      popup.textContent = `+${amount}`;
      popup.style.left = `${x}px`;
      popup.style.top = `${y}px`;
      document.body.appendChild(popup);
      setTimeout(() => popup.remove(), 1000);
    }
    
    function playSound(soundId) {
      const sound = document.getElementById(soundId);
      sound.currentTime = 0;
      sound.play();
    }
    
    function increaseCurrency(e) {
      const currentTime = Date.now();
      const timeSinceLastClick = currentTime - lastClickTime;
      
      if (timeSinceLastClick < COMBO_DURATION) {
        combo++;
        clearTimeout(comboTimeout);
      } else {
        combo = 1;
      }
      
      lastClickTime = currentTime;
      
      // Calcular bônus do combo
      const comboBonus = 1 + (combo * 0.1); // 10% de bônus por combo
      const amount = Math.floor(clickMultiplier * comboBonus);
      
      currency += amount;
      stats.totalClicks++;
      
      updateDisplays();
      saveGame();
      updateStats();
      updateChallengeProgress();
      
      if (combo > 1) {
        showCombo();
      }
      
      showNotification(`+${amount} teias!`, 'success', 1000);
      
      // Resetar combo após o tempo limite
      comboTimeout = setTimeout(() => {
        combo = 0;
      }, COMBO_DURATION);
    }

    function buyItem(item) {
      if (currency >= item.cost) {
        currency -= item.cost;
        if (item.type === 'click') {
          clickMultiplier += item.value;
        } else if (item.type === 'auto') {
          autoClickers += item.value;
        }
        playSound('buySound');
        updateDisplays();
        saveGame();
        checkAchievements();
        stats.upgradesBought++;
        updateStats();
        updateChallengeProgress();
        showNotification(`${item.name} comprado!`, 'success');
      } else {
        showNotification('Teias insuficientes!', 'error');
      }
    }

    function generateShopItems() {
      const shopContainer = document.getElementById('shopItems');
      items.forEach(item => {
        const itemElement = document.createElement('div');
        itemElement.className = 'item';
        itemElement.innerHTML = `
          <div class="text-right">
            <div>${item.name}</div>
            <div>${item.effect}</div>
            <div>$${item.cost}</div>
          </div>
        `;
        itemElement.addEventListener('click', () => buyItem(item));
        shopContainer.appendChild(itemElement);
      });
    }

    function openModal() {
      document.getElementById('settingsModal').style.display = 'flex';
    }

    function closeModal() {
      document.getElementById('settingsModal').style.display = 'none';
    }

    function resetProgress() {
      localStorage.clear();
      alert('Progresso apagado!');
      location.reload();
    }

    function goToMenu() {
      closeModal();
      window.location.href = 'index.html'; // Atualize o link conforme necessário
    }

    document.querySelector('.top-left-buttons .button').addEventListener('click', openModal);

    setInterval(() => {
      currency += autoClickers;
      updateDisplays();
      saveGame();
    }, 1000);

    window.onload = () => {
      loadGame();
      loadEquippedSkin()
      generateShopItems();
    };
  </script>
    <script>
      const cursor = document.getElementById('cursor');
      document.addEventListener('mousemove', (e) => {
        cursor.style.left = `${e.pageX}px`;
        cursor.style.top = `${e.pageY}px`;
      });
    </script>
  <script>
    const achievements = [
      { id: 'first_click', name: 'Primeiro Clique', description: 'Faça seu primeiro clique', icon: 'imgs/achievement1.png', condition: (game) => game.clicks >= 1 },
      { id: 'first_upgrade', name: 'Primeiro Upgrade', description: 'Compre seu primeiro upgrade', icon: 'imgs/achievement2.png', condition: (game) => game.upgrades >= 1 },
      { id: 'millionaire', name: 'Milionário', description: 'Alcance 1 milhão de teias', icon: 'imgs/achievement3.png', condition: (game) => game.currency >= 1000000 },
      { id: 'auto_king', name: 'Rei do Auto', description: 'Tenha 1000 auto-clickers', icon: 'imgs/achievement4.png', condition: (game) => game.autoClickers >= 1000 }
    ];
    
    let unlockedAchievements = JSON.parse(localStorage.getItem('achievements')) || [];
    
    function checkAchievements() {
      const gameState = {
        clicks: currency,
        upgrades: items.filter(item => item.purchased).length,
        currency: currency,
        autoClickers: autoClickers
      };
      
      achievements.forEach(achievement => {
        if (!unlockedAchievements.includes(achievement.id) && achievement.condition(gameState)) {
          unlockAchievement(achievement);
        }
      });
    }
    
    function unlockAchievement(achievement) {
      unlockedAchievements.push(achievement.id);
      localStorage.setItem('achievements', JSON.stringify(unlockedAchievements));
      showAchievementNotification(achievement);
      updateAchievementsDisplay();
    }
    
    function showAchievementNotification(achievement) {
      const notification = document.createElement('div');
      notification.className = 'achievement-notification';
      notification.innerHTML = `
        <img src="${achievement.icon}" alt="${achievement.name}" class="achievement-icon">
        <div>
          <h3>Conquista Desbloqueada!</h3>
          <p>${achievement.name}</p>
        </div>
      `;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 3000);
    }
    
    function updateAchievementsDisplay() {
      const achievementsList = document.getElementById('achievementsList');
      achievementsList.innerHTML = '';
      
      achievements.forEach(achievement => {
        const isUnlocked = unlockedAchievements.includes(achievement.id);
        const achievementElement = document.createElement('div');
        achievementElement.className = `achievement ${isUnlocked ? '' : 'locked'}`;
        achievementElement.innerHTML = `
          <img src="${achievement.icon}" alt="${achievement.name}" class="achievement-icon">
          <div>
            <h3>${achievement.name}</h3>
            <p>${achievement.description}</p>
          </div>
        `;
        achievementsList.appendChild(achievementElement);
      });
    }
    
    function toggleAchievementsPanel() {
      const panel = document.getElementById('achievementsPanel');
      panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
    }
    
    // Adicionar botão de conquistas
    const achievementsButton = document.createElement('button');
    achievementsButton.className = 'button2';
    achievementsButton.innerHTML = '<i class="fas fa-trophy"></i>';
    achievementsButton.onclick = toggleAchievementsPanel;
    document.querySelector('.top-left-buttons').appendChild(achievementsButton);
    
    // Atualizar checkAchievements nas funções relevantes
    function increaseCurrency() {
      currency += clickMultiplier;
      stats.totalClicks++;
      updateDisplays();
      saveGame();
      checkAchievements();
    }
    
    function buyItem(item) {
      if (currency >= item.cost) {
        currency -= item.cost;
        if (item.type === 'click') {
          clickMultiplier += item.value;
        } else if (item.type === 'auto') {
          autoClickers += item.value;
        }
        stats.upgradesBought++;
        updateDisplays();
        saveGame();
        checkAchievements();
      }
    }
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      updateAchievementsDisplay();
    };
  </script>
  <script>
    function loadStats() {
      const savedStats = JSON.parse(localStorage.getItem('spiderClickerStats'));
      if (savedStats) {
        stats = savedStats;
      }
    }
    
    function saveStats() {
      localStorage.setItem('spiderClickerStats', JSON.stringify(stats));
    }
    
    function updateStats() {
      stats.totalTeias = currency;
      stats.highestMultiplier = Math.max(stats.highestMultiplier, clickMultiplier);
      saveStats();
      updateStatsDisplay();
    }
    
    function updateStatsDisplay() {
      const statsList = document.getElementById('statsList');
      statsList.innerHTML = `
        <div class="stat-item">
          <span>Total de Cliques:</span>
          <span>${stats.totalClicks}</span>
        </div>
        <div class="stat-item">
          <span>Total de Teias:</span>
          <span>${stats.totalTeias}</span>
        </div>
        <div class="stat-item">
          <span>Tempo Jogado:</span>
          <span>${formatTime(stats.timePlayed)}</span>
        </div>
        <div class="stat-item">
          <span>Upgrades Comprados:</span>
          <span>${stats.upgradesBought}</span>
        </div>
        <div class="stat-item">
          <span>Maior Multiplicador:</span>
          <span>x${stats.highestMultiplier}</span>
        </div>
      `;
    }
    
    function formatTime(seconds) {
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hours}h ${minutes}m ${secs}s`;
    }
    
    function toggleStatsPanel() {
      const panel = document.getElementById('statsPanel');
      panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
    }
    
    // Adicionar botão de estatísticas
    const statsButton = document.createElement('button');
    statsButton.className = 'button2';
    statsButton.innerHTML = '<i class="fas fa-chart-bar"></i>';
    statsButton.onclick = toggleStatsPanel;
    document.querySelector('.top-left-buttons').appendChild(statsButton);
    
    // Atualizar tempo jogado a cada segundo
    setInterval(() => {
      stats.timePlayed++;
      updateStats();
    }, 1000);
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      loadStats();
      loadPrestige();
      loadChallenges();
      checkNewDay();
      updateStatsDisplay();
      updatePrestigeDisplay();
      updateChallengesDisplay();
    };
  </script>
  <script>
    const events = [
      {
        name: 'Chuva de Teias',
        description: 'Ganhe 2x mais teias por 30 segundos!',
        duration: 30000,
        effect: (game) => {
          game.clickMultiplier *= 2;
          return () => {
            game.clickMultiplier /= 2;
          };
        }
      },
      {
        name: 'Festa das Aranhas',
        description: 'Auto-clickers trabalham 3x mais rápido por 1 minuto!',
        duration: 60000,
        effect: (game) => {
          game.autoClickers *= 3;
          return () => {
            game.autoClickers /= 3;
          };
        }
      },
      {
        name: 'Sorte do Dia',
        description: 'Chance de ganhar 10x mais teias por 15 segundos!',
        duration: 15000,
        effect: (game) => {
          const originalClick = game.increaseCurrency;
          game.increaseCurrency = function() {
            if (Math.random() < 0.3) {
              currency += clickMultiplier * 10;
            } else {
              currency += clickMultiplier;
            }
            updateDisplays();
            saveGame();
          };
          return () => {
            game.increaseCurrency = originalClick;
          };
        }
      }
    ];
    
    let activeEvent = null;
    let eventTimeout = null;
    
    function startRandomEvent() {
      if (activeEvent) {
        showNotification('Já existe um evento ativo!', 'warning');
        return;
      }
      
      const event = events[Math.floor(Math.random() * events.length)];
      const gameState = {
        currency,
        clickMultiplier,
        autoClickers,
        increaseCurrency
      };
      
      const cleanup = event.effect(gameState);
      activeEvent = event;
      
      showNotification(`Evento: ${event.name} - ${event.description}`, 'info');
      
      eventTimeout = setTimeout(() => {
        cleanup();
        activeEvent = null;
        showNotification(`Evento ${event.name} terminou!`, 'info');
      }, event.duration);
    }
    
    function showEventNotification(event) {
      const notification = document.createElement('div');
      notification.className = 'event-notification';
      notification.innerHTML = `
        <h3>${event.name}</h3>
        <p>${event.description}</p>
      `;
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 3000);
    }
    
    // Iniciar eventos aleatórios a cada 5 minutos
    setInterval(startRandomEvent, 300000);
    
    // Adicionar botão para forçar evento
    const eventButton = document.createElement('button');
    eventButton.className = 'button2';
    eventButton.innerHTML = '<i class="fas fa-star"></i>';
    eventButton.onclick = startRandomEvent;
    document.querySelector('.top-left-buttons').appendChild(eventButton);
  </script>
  <script>
    let prestigeLevel = 0;
    let prestigeBonus = 1;
    let combo = 0;
    let lastClickTime = 0;
    let comboTimeout = null;
    const COMBO_DURATION = 2000; // 2 segundos para manter o combo
    
    function loadPrestige() {
      const savedPrestige = JSON.parse(localStorage.getItem('spiderClickerPrestige'));
      if (savedPrestige) {
        prestigeLevel = savedPrestige.level;
        prestigeBonus = savedPrestige.bonus;
      }
    }
    
    function savePrestige() {
      localStorage.setItem('spiderClickerPrestige', JSON.stringify({
        level: prestigeLevel,
        bonus: prestigeBonus
      }));
    }
    
    function calculateNextPrestige() {
      return Math.floor(1000000 * Math.pow(1.5, prestigeLevel));
    }
    
    function updatePrestigeDisplay() {
      document.getElementById('prestigeLevel').textContent = prestigeLevel;
      document.getElementById('prestigeBonus').textContent = `${prestigeBonus}x`;
      document.getElementById('nextPrestige').textContent = calculateNextPrestige();
      
      const prestigeButton = document.getElementById('prestigeButton');
      prestigeButton.disabled = currency < calculateNextPrestige();
    }
    
    function togglePrestigePanel() {
      const panel = document.getElementById('prestigePanel');
      panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
      updatePrestigeDisplay();
    }
    
    function showCombo() {
      // Criar múltiplas aranhas caindo
      for (let i = 0; i < combo; i++) {
        const spider = document.createElement('div');
        spider.className = 'falling-spider';
        spider.style.left = `${Math.random() * window.innerWidth}px`;
        spider.style.animationDuration = `${2 + Math.random() * 2}s`;
        document.body.appendChild(spider);
        
        setTimeout(() => spider.remove(), 4000);
      }
    }
    
    function performPrestige() {
      if (currency >= calculateNextPrestige()) {
        if (minigameActive) {
          closeMinigame();
        }
        
        prestigeLevel++;
        prestigeBonus = 1 + (prestigeLevel * 0.1);
        
        currency = 0;
        clickMultiplier = 1;
        autoClickers = 0;
        combo = 0;
        clearTimeout(comboTimeout);
        
        clickMultiplier *= prestigeBonus;
        
        savePrestige();
        saveGame();
        updateDisplays();
        updatePrestigeDisplay();
        checkSkinUnlocks();
        
        showNotification(`Prestígio ${prestigeLevel} alcançado!`, 'success');
      } else {
        showNotification('Teias insuficientes para prestígio!', 'warning');
      }
    }
    
    // Adicionar botão de prestígio
    const prestigeButton = document.createElement('button');
    prestigeButton.className = 'button2';
    prestigeButton.innerHTML = '<i class="fas fa-crown"></i>';
    prestigeButton.onclick = togglePrestigePanel;
    document.querySelector('.top-left-buttons').appendChild(prestigeButton);
    
    // Adicionar evento ao botão de prestígio
    document.getElementById('prestigeButton').addEventListener('click', performPrestige);
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      loadStats();
      loadPrestige();
      loadChallenges();
      checkNewDay();
      updateStatsDisplay();
      updatePrestigeDisplay();
    };
  </script>
  <script>
    const challenges = [
      {
        id: 'click_1000',
        name: 'Mestre do Clique',
        description: 'Faça 1000 cliques',
        target: 1000,
        reward: 1000,
        progress: 0,
        type: 'clicks'
      },
      {
        id: 'collect_10000',
        name: 'Colecionador',
        description: 'Colete 10000 teias',
        target: 10000,
        reward: 2000,
        progress: 0,
        type: 'teias'
      },
      {
        id: 'buy_5',
        name: 'Comprador',
        description: 'Compre 5 upgrades',
        target: 5,
        reward: 1500,
        progress: 0,
        type: 'upgrades'
      }
    ];
    
    let dailyChallenges = [];
    let challengeProgress = {};
    
    function loadChallenges() {
      const savedChallenges = JSON.parse(localStorage.getItem('spiderClickerChallenges'));
      if (savedChallenges) {
        dailyChallenges = savedChallenges.dailyChallenges;
        challengeProgress = savedChallenges.progress;
      } else {
        generateDailyChallenges();
      }
    }
    
    function saveChallenges() {
      localStorage.setItem('spiderClickerChallenges', JSON.stringify({
        dailyChallenges,
        progress: challengeProgress
      }));
    }
    
    function generateDailyChallenges() {
      dailyChallenges = [];
      challengeProgress = {};
      
      // Selecionar 3 desafios aleatórios
      const availableChallenges = [...challenges];
      for (let i = 0; i < 3; i++) {
        const randomIndex = Math.floor(Math.random() * availableChallenges.length);
        const challenge = {...availableChallenges[randomIndex]};
        dailyChallenges.push(challenge);
        challengeProgress[challenge.id] = 0;
        availableChallenges.splice(randomIndex, 1);
      }
      
      saveChallenges();
    }
    
    function updateChallengeProgress() {
      dailyChallenges.forEach(challenge => {
        switch (challenge.type) {
          case 'clicks':
            challengeProgress[challenge.id] = stats.totalClicks;
            break;
          case 'teias':
            challengeProgress[challenge.id] = stats.totalTeias;
            break;
          case 'upgrades':
            challengeProgress[challenge.id] = stats.upgradesBought;
            break;
        }
        
        if (challengeProgress[challenge.id] >= challenge.target) {
          claimChallengeReward(challenge);
        }
      });
      
      saveChallenges();
      updateChallengesDisplay();
    }
    
    function claimChallengeReward(challenge) {
      if (!challenge.claimed) {
        currency += challenge.reward;
        challenge.claimed = true;
        saveGame();
        saveChallenges();
        updateChallengesDisplay();
        
        showNotification(`Desafio "${challenge.name}" concluído! +${challenge.reward} teias`, 'success');
      }
    }
    
    function updateChallengesDisplay() {
      const challengesList = document.getElementById('challengesList');
      challengesList.innerHTML = '';
      
      dailyChallenges.forEach(challenge => {
        const progress = Math.min(challengeProgress[challenge.id] / challenge.target * 100, 100);
        const challengeElement = document.createElement('div');
        challengeElement.className = 'challenge';
        challengeElement.innerHTML = `
          <h3>${challenge.name}</h3>
          <p>${challenge.description}</p>
          <div class="challenge-progress">
            <div class="challenge-progress-bar" style="width: ${progress}%"></div>
          </div>
          <p>Progresso: ${challengeProgress[challenge.id]}/${challenge.target}</p>
          <p class="challenge-reward">Recompensa: ${challenge.reward} teias</p>
        `;
        challengesList.appendChild(challengeElement);
      });
    }
    
    function toggleChallengesPanel() {
      const panel = document.getElementById('challengesPanel');
      panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
      updateChallengesDisplay();
    }
    
    // Adicionar botão de desafios
    const challengesButton = document.createElement('button');
    challengesButton.className = 'button2';
    challengesButton.innerHTML = '<i class="fas fa-tasks"></i>';
    challengesButton.onclick = toggleChallengesPanel;
    document.querySelector('.top-left-buttons').appendChild(challengesButton);
    
    // Atualizar progresso dos desafios nas funções relevantes
    function increaseCurrency() {
      currency += clickMultiplier;
      stats.totalClicks++;
      updateDisplays();
      saveGame();
      updateStats();
      updateChallengeProgress();
    }
    
    function buyItem(item) {
      if (currency >= item.cost) {
        currency -= item.cost;
        if (item.type === 'click') {
          clickMultiplier += item.value;
        } else if (item.type === 'auto') {
          autoClickers += item.value;
        }
        stats.upgradesBought++;
        updateDisplays();
        saveGame();
        updateStats();
        updateChallengeProgress();
      }
    }
    
    // Verificar se é um novo dia para gerar novos desafios
    function checkNewDay() {
      const lastUpdate = localStorage.getItem('lastChallengeUpdate');
      const today = new Date().toDateString();
      
      if (lastUpdate !== today) {
        generateDailyChallenges();
        localStorage.setItem('lastChallengeUpdate', today);
      }
    }
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      loadStats();
      loadPrestige();
      loadChallenges();
      checkNewDay();
      updateStatsDisplay();
      updatePrestigeDisplay();
      updateChallengesDisplay();
    };
  </script>
  <script>
    function showNotification(message, type = 'info', duration = 3000) {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      
      const container = document.getElementById('notificationContainer');
      container.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-out forwards';
        setTimeout(() => notification.remove(), 300);
      }, duration);
    }
  </script>
  <script>
    const specialSkins = [
      {
        id: 'golden_spider',
        name: 'Aranha Dourada',
        image: 'imgs/GoldenSpider.png',
        requirements: {
          prestige: 1,
          totalTeias: 1000000
        },
        bonus: 1.5
      },
      {
        id: 'rainbow_spider',
        name: 'Aranha Arco-Íris',
        image: 'imgs/RainbowSpider.png',
        requirements: {
          prestige: 3,
          totalTeias: 5000000
        },
        bonus: 2
      },
      {
        id: 'diamond_spider',
        name: 'Aranha de Diamante',
        image: 'imgs/DiamondSpider.png',
        requirements: {
          prestige: 5,
          totalTeias: 10000000
        },
        bonus: 3
      }
    ];
    
    let unlockedSkins = JSON.parse(localStorage.getItem('unlockedSkins')) || [];
    
    function checkSkinUnlocks() {
      specialSkins.forEach(skin => {
        if (!unlockedSkins.includes(skin.id)) {
          if (prestigeLevel >= skin.requirements.prestige && 
              stats.totalTeias >= skin.requirements.totalTeias) {
            unlockSkin(skin);
          }
        }
      });
    }
    
    function unlockSkin(skin) {
      unlockedSkins.push(skin.id);
      localStorage.setItem('unlockedSkins', JSON.stringify(unlockedSkins));
      
      showNotification(`Nova skin desbloqueada: ${skin.name}!`, 'success');
      
      // Aplicar bônus da skin
      clickMultiplier *= skin.bonus;
      updateDisplays();
      saveGame();
    }
    
    function isSkinUnlocked(skinId) {
      return unlockedSkins.includes(skinId);
    }
    
    function generateSkins() {
      const skinsContainer = document.getElementById('skinsContainer');
      skinsContainer.innerHTML = '';
      
      // Criar grid de skins
      const grid = document.createElement('div');
      grid.className = 'skins-grid';
      
      // Adicionar skins normais
      skins.forEach(skin => {
        const skinElement = document.createElement('div');
        skinElement.className = 'skin-item';
        skinElement.innerHTML = `
          <img src="${skin.image}" alt="${skin.name}">
          <div>${skin.name}</div>
          <div>Preço: ${skin.cost}</div>
        `;
        skinElement.addEventListener('click', () => equipSkin(skin));
        grid.appendChild(skinElement);
      });
      
      // Adicionar skins especiais
      specialSkins.forEach(skin => {
        const isUnlocked = isSkinUnlocked(skin.id);
        const skinElement = document.createElement('div');
        skinElement.className = `skin-item ${isUnlocked ? 'special' : 'locked'}`;
        skinElement.innerHTML = `
          <img src="${skin.image}" alt="${skin.name}">
          <div>${skin.name}</div>
          <div class="skin-requirements">
            Requer: Prestígio ${skin.requirements.prestige}, ${skin.requirements.totalTeias} teias
          </div>
        `;
        if (isUnlocked) {
          skinElement.addEventListener('click', () => equipSkin(skin));
        }
        grid.appendChild(skinElement);
      });
      
      skinsContainer.appendChild(grid);
    }
    
    // Atualizar as funções existentes para incluir verificação de skins
    function updateStats() {
      stats.totalTeias = currency;
      stats.highestMultiplier = Math.max(stats.highestMultiplier, clickMultiplier);
      saveStats();
      updateStatsDisplay();
      checkSkinUnlocks();
    }
    
    function performPrestige() {
      if (currency >= calculateNextPrestige()) {
        if (minigameActive) {
          closeMinigame();
        }
        
        prestigeLevel++;
        prestigeBonus = 1 + (prestigeLevel * 0.1);
        
        currency = 0;
        clickMultiplier = 1;
        autoClickers = 0;
        combo = 0;
        clearTimeout(comboTimeout);
        
        clickMultiplier *= prestigeBonus;
        
        savePrestige();
        saveGame();
        updateDisplays();
        updatePrestigeDisplay();
        checkSkinUnlocks();
        
        showNotification(`Prestígio ${prestigeLevel} alcançado!`, 'success');
      } else {
        showNotification('Teias insuficientes para prestígio!', 'warning');
      }
    }
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      loadStats();
      loadPrestige();
      loadChallenges();
      checkNewDay();
      updateStatsDisplay();
      updatePrestigeDisplay();
      updateChallengesDisplay();
      checkSkinUnlocks();
    };
  </script>
  <script>
    let minigameActive = false;
    let minigameScore = 0;
    let minigameTimer = 30;
    let minigameInterval = null;
    let spiderPosition = -1;
    
    function startMinigame() {
      minigameActive = true;
      minigameScore = 0;
      minigameTimer = 30;
      document.getElementById('minigamePanel').style.display = 'block';
      document.getElementById('minigameScore').textContent = 'Pontuação: 0';
      updateMinigameTimer();
      generateSpider();
      minigameInterval = setInterval(updateMinigameTimer, 1000);
    }
    
    function closeMinigame() {
      minigameActive = false;
      clearInterval(minigameInterval);
      document.getElementById('minigamePanel').style.display = 'none';
      
      // Recompensa baseada na pontuação
      const reward = minigameScore * 100;
      currency += reward;
      updateDisplays();
      saveGame();
      
      showNotification(`Você ganhou ${reward} teias no mini-jogo!`, 'success');
    }
    
    function updateMinigameTimer() {
      minigameTimer--;
      document.getElementById('minigameTimer').textContent = minigameTimer;
      
      if (minigameTimer <= 0) {
        closeMinigame();
      }
    }
    
    function generateSpider() {
      const grid = document.getElementById('minigameGrid');
      grid.innerHTML = '';
      
      // Gerar nova posição para a aranha
      const newPosition = Math.floor(Math.random() * 9);
      while (newPosition === spiderPosition) {
        newPosition = Math.floor(Math.random() * 9);
      }
      spiderPosition = newPosition;
      
      // Criar células do grid
      for (let i = 0; i < 9; i++) {
        const cell = document.createElement('div');
        cell.className = 'minigame-cell';
        if (i === spiderPosition) {
          cell.classList.add('spider');
        }
        cell.addEventListener('click', () => handleCellClick(i));
        grid.appendChild(cell);
      }
    }
    
    function handleCellClick(index) {
      if (!minigameActive) return;
      
      if (index === spiderPosition) {
        minigameScore++;
        document.getElementById('minigameScore').textContent = `Pontuação: ${minigameScore}`;
        generateSpider();
      }
    }
    
    // Adicionar botão de mini-jogo
    const minigameButton = document.createElement('button');
    minigameButton.className = 'button2';
    minigameButton.innerHTML = '<i class="fas fa-gamepad"></i>';
    minigameButton.onclick = startMinigame;
    document.querySelector('.top-left-buttons').appendChild(minigameButton);
    
    // Atualizar a função de prestígio para fechar o mini-jogo
    function performPrestige() {
      if (currency >= calculateNextPrestige()) {
        if (minigameActive) {
          closeMinigame();
        }
        
        prestigeLevel++;
        prestigeBonus = 1 + (prestigeLevel * 0.1);
        
        currency = 0;
        clickMultiplier = 1;
        autoClickers = 0;
        combo = 0;
        clearTimeout(comboTimeout);
        
        clickMultiplier *= prestigeBonus;
        
        savePrestige();
        saveGame();
        updateDisplays();
        updatePrestigeDisplay();
        checkSkinUnlocks();
        
        showNotification(`Prestígio ${prestigeLevel} alcançado!`, 'success');
      } else {
        showNotification('Teias insuficientes para prestígio!', 'warning');
      }
    }
  </script>
  <script>
    const minigameAchievements = [
      {
        id: 'minigame_beginner',
        name: 'Iniciante no Mini-jogo',
        description: 'Alcance 10 pontos no mini-jogo',
        target: 10,
        reward: 1000
      },
      {
        id: 'minigame_pro',
        name: 'Profissional do Mini-jogo',
        description: 'Alcance 30 pontos no mini-jogo',
        target: 30,
        reward: 5000
      },
      {
        id: 'minigame_master',
        name: 'Mestre do Mini-jogo',
        description: 'Alcance 50 pontos no mini-jogo',
        target: 50,
        reward: 10000
      }
    ];
    
    let minigameStats = {
      highestScore: 0,
      totalGames: 0,
      totalPoints: 0
    };
    
    function loadMinigameStats() {
      const savedStats = JSON.parse(localStorage.getItem('minigameStats'));
      if (savedStats) {
        minigameStats = savedStats;
      }
    }
    
    function saveMinigameStats() {
      localStorage.setItem('minigameStats', JSON.stringify(minigameStats));
    }
    
    function checkMinigameAchievements() {
      minigameAchievements.forEach(achievement => {
        if (!unlockedAchievements.includes(achievement.id) && 
            minigameStats.highestScore >= achievement.target) {
          unlockAchievement({
            id: achievement.id,
            name: achievement.name,
            description: achievement.description
          });
          
          // Dar recompensa pela conquista
          currency += achievement.reward;
          updateDisplays();
          saveGame();
          
          showNotification(`Conquista desbloqueada: ${achievement.name}! +${achievement.reward} teias`, 'success');
        }
      });
    }
    
    function closeMinigame() {
      minigameActive = false;
      clearInterval(minigameInterval);
      document.getElementById('minigamePanel').style.display = 'none';
      
      // Atualizar estatísticas
      minigameStats.highestScore = Math.max(minigameStats.highestScore, minigameScore);
      minigameStats.totalGames++;
      minigameStats.totalPoints += minigameScore;
      saveMinigameStats();
      
      // Recompensa baseada na pontuação
      const reward = minigameScore * 100;
      currency += reward;
      updateDisplays();
      saveGame();
      
      // Verificar conquistas
      checkMinigameAchievements();
      
      showNotification(`Você ganhou ${reward} teias no mini-jogo!`, 'success');
    }
    
    // Atualizar a função de prestígio para salvar estatísticas do mini-jogo
    function performPrestige() {
      if (currency >= calculateNextPrestige()) {
        if (minigameActive) {
          closeMinigame();
        }
        
        prestigeLevel++;
        prestigeBonus = 1 + (prestigeLevel * 0.1);
        
        currency = 0;
        clickMultiplier = 1;
        autoClickers = 0;
        combo = 0;
        clearTimeout(comboTimeout);
        
        clickMultiplier *= prestigeBonus;
        
        savePrestige();
        saveGame();
        updateDisplays();
        updatePrestigeDisplay();
        checkSkinUnlocks();
        
        showNotification(`Prestígio ${prestigeLevel} alcançado!`, 'success');
      } else {
        showNotification('Teias insuficientes para prestígio!', 'warning');
      }
    }
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      loadStats();
      loadPrestige();
      loadChallenges();
      loadMinigameStats();
      checkNewDay();
      updateStatsDisplay();
      updatePrestigeDisplay();
      updateChallengesDisplay();
      checkSkinUnlocks();
    };
  </script>
  <div class="seasonal-event" id="seasonalEvent">
    <div class="seasonal-content">
      <button class="modal-close" onclick="closeSeasonalEvent()">×</button>
      <h2 id="seasonalTitle">Evento Sazonal</h2>
      <p id="seasonalDescription"></p>
      <div class="seasonal-rewards" id="seasonalRewards"></div>
    </div>
  </div>
  <script>
    const seasonalEvents = [
      {
        id: 'halloween',
        name: 'Halloween das Aranhas',
        description: 'Celebre o Halloween com aranhas especiais!',
        startDate: '10-25',
        endDate: '11-01',
        rewards: [
          { name: 'Aranha Fantasma', image: 'imgs/GhostSpider.png', bonus: 2 },
          { name: 'Aranha Abóbora', image: 'imgs/PumpkinSpider.png', bonus: 1.5 }
        ],
        multiplier: 1.5
      },
      {
        id: 'christmas',
        name: 'Natal das Aranhas',
        description: 'Celebre o Natal com aranhas festivas!',
        startDate: '12-20',
        endDate: '12-27',
        rewards: [
          { name: 'Aranha Noel', image: 'imgs/SantaSpider.png', bonus: 2 },
          { name: 'Aranha Presente', image: 'imgs/GiftSpider.png', bonus: 1.5 }
        ],
        multiplier: 1.5
      }
    ];
    
    let activeSeasonalEvent = null;
    let seasonalMultiplier = 1;
    
    function checkSeasonalEvents() {
      const today = new Date();
      const currentDate = `${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
      
      seasonalEvents.forEach(event => {
        if (currentDate >= event.startDate && currentDate <= event.endDate) {
          startSeasonalEvent(event);
        }
      });
    }
    
    function startSeasonalEvent(event) {
      activeSeasonalEvent = event;
      seasonalMultiplier = event.multiplier;
      
      document.getElementById('seasonalTitle').textContent = event.name;
      document.getElementById('seasonalDescription').textContent = event.description;
      
      const rewardsContainer = document.getElementById('seasonalRewards');
      rewardsContainer.innerHTML = '';
      
      event.rewards.forEach(reward => {
        const rewardElement = document.createElement('div');
        rewardElement.className = 'seasonal-reward';
        rewardElement.innerHTML = `
          <img src="${reward.image}" alt="${reward.name}" style="width: 64px; height: 64px;">
          <p>${reward.name}</p>
          <p>Bônus: x${reward.bonus}</p>
        `;
        rewardsContainer.appendChild(rewardElement);
      });
      
      document.getElementById('seasonalEvent').style.display = 'flex';
      
      // Adicionar skins sazonais
      event.rewards.forEach(reward => {
        if (!skins.some(skin => skin.image === reward.image)) {
          skins.push({
            name: reward.name,
            cost: 0,
            image: reward.image,
            bonus: reward.bonus
          });
        }
      });
      
      showNotification(`Evento Sazonal: ${event.name} começou!`, 'success');
    }
    
    function closeSeasonalEvent() {
      document.getElementById('seasonalEvent').style.display = 'none';
    }
    
    // Atualizar a função de aumento de moeda para incluir o multiplicador sazonal
    function increaseCurrency() {
      const currentTime = Date.now();
      const timeSinceLastClick = currentTime - lastClickTime;
      
      if (timeSinceLastClick < COMBO_DURATION) {
        combo++;
        clearTimeout(comboTimeout);
      } else {
        combo = 1;
      }
      
      lastClickTime = currentTime;
      
      const comboBonus = 1 + (combo * 0.1);
      const amount = Math.floor(clickMultiplier * comboBonus * seasonalMultiplier);
      
      currency += amount;
      stats.totalClicks++;
      
      updateDisplays();
      saveGame();
      updateStats();
      updateChallengeProgress();
      
      if (combo > 1) {
        showCombo();
      }
      
      showNotification(`+${amount} teias!`, 'success', 1000);
      
      comboTimeout = setTimeout(() => {
        combo = 0;
      }, COMBO_DURATION);
    }
    
    window.onload = () => {
      loadGame();
      loadEquippedSkin();
      generateShopItems();
      loadStats();
      loadPrestige();
      loadChallenges();
      checkNewDay();
      checkSeasonalEvents();
      updateStatsDisplay();
      updatePrestigeDisplay();
      updateChallengesDisplay();
      checkSkinUnlocks();
    };
  </script>
</body>
</html>
